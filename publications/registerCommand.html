<html>
   <head>
    <meta charset="utf-8" />
    <title>Register Command Device</title>
    <script src="scripts/jblo.js" type="text/javascript"></script>
   </head>
    <body>
      <h1>Command Plug</h1>
      <button id="btn_ON"  onclick="sendCmd('ON')">ON</button>
      <button id="btn_OFF"  onclick="sendCmd('OFF')">OFF</button>
      <div id="root"></div>
     	<script>

const TURN_ON_COMMAND = "1150000601";
const TURN_OFF_COMMAND = "1150000600";

const DEVICE_EUI = "70B3D5E75E007547";

let theCommand = {
  "confirmed": true,
  "data": "1150000601",
  "port": 125
}
var LOAPIKEY = undefined;

function sendCmd(cmd) {
  theCommand.data = (cmd == 'ON')? TURN_ON_COMMAND:TURN_OFF_COMMAND;
  registerCommand(LOAPIKEY, DEVICE_EUI, theCommand,
    commandSent =  (result) => {console.log(result);} ,
    onError = ()=>{console.log ("ERROR");}
  );
}


function Main(api_key) {
  LOAPIKEY = api_key;
  // Ici votre code Live Objects

}
obtainApiKey (document.getElementById("root"), onValidValue= Main, onInvalidValue= (invkey)=>{})

    	</script>
   </body>
</html>
